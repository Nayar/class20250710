<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/public/css/mystyle.css">
    <link rel="stylesheet" href="/public/css/global.css">
    <script>
        function reload ( ) {
            document.getElementById("questions").innerHTML = ""
                fetch("/api/contacts")
                .then(function(data){
                    return data.json()
                }).then(function(data){
                    console.log(data)
                    for(let i=0; i < data.length; i++){
                        document.getElementById("questions").innerHTML += "<li>"+data[i].question+"</li>"
                    }
                })}

        function pressed_submit(event) {
            event.preventDefault()
            fetch("/api/contacts",{
                method: "POST",
                body: '{"name": "'+document.forms[0].name.value+'", "question": "'+document.forms[0].question.value+'"}',
                headers: {
                    "Content-type": "application/json"
                }
            })
            .then(function(data){
                reload()
                return data.json()
            })
        }
        window.onload = (event) => {
            reload()
        };
        
        


    </script>
</head>
<body>
    <h1>HTML FROM nodejs</h1>
    <form onsubmit="pressed_submit(event)">
        <label>Name:</label><input name="name"/><br/>
        <label>Question:</label><input name="question"/>
        <input type="submit" />
    </form>
    <ul id="questions"></ul>
</body>
</html>